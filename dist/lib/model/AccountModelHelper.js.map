{"version":3,"file":"AccountModelHelper.js","sourceRoot":"","sources":["../../../src/lib/model/AccountModelHelper.ts"],"names":[],"mappings":";;AAGA,sDAyBC;AA3BD,6DAAgD;AAEzC,KAAK,UAAU,qBAAqB,CAAC,SAAoB;IAC9D,MAAM,QAAQ,GAAG,MAAM,SAAS,CAAC,OAAO,CAAC,OAAO,CAC9C,+BAAS,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI,EAC1C,+BAAS,CAAC,OAAO,CAAC,mBAAmB,CAAC,KAAK,EAAE,CAC9C,CAAC;IAEF,IAAI,UAAU,GAAG,KAAK,CAAC;IACvB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QACtB,MAAM,KAAK,CAAC,kBAAkB,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAA;IACvD,CAAC;IAED,IAAI,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,qBAAqB,EAAE,CAAC;QACzD,KAAK,MAAM,MAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,CAAC;YACzE,MAAM,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,WAAW,CAAC,CAAC;YAC5D,IAAI,CAAC,EAAE,CAAC;gBACN,UAAU,GAAG,CAAC,CAAC,KAAK,KAAK,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;gBAC5C,MAAM;YACR,CAAC;QACH,CAAC;IACH,CAAC;IAED,OAAO;QACL,UAAU;QACV,QAAQ;KACT,CAAC;AACJ,CAAC","sourcesContent":["import type Innertube from \"volumio-youtubei.js\";\nimport { Endpoints } from \"volumio-youtubei.js\";\n\nexport async function getAccountInitialInfo(innertube: Innertube) {\n  const response = await innertube.actions.execute(\n    Endpoints.Account.AccountListEndpoint.PATH,\n    Endpoints.Account.AccountListEndpoint.build()\n  );\n\n  let isSignedIn = false;\n  if (!response.success) {\n    throw Error(`Response error ${response.status_code}`)\n  }\n\n  if (response.data.responseContext?.serviceTrackingParams) {\n    for (const params of response.data.responseContext.serviceTrackingParams) {\n      const p = params.params?.find((p) => p.key === 'logged_in');\n      if (p) {\n        isSignedIn = p.value === '1' ? true : false;\n        break;\n      }\n    }\n  }\n\n  return {\n    isSignedIn,\n    response\n  };\n}\n"]}